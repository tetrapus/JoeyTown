(this.webpackJsonpjoeytown=this.webpackJsonpjoeytown||[]).push([[0],{10:function(e,n,t){e.exports=t.p+"static/media/grass.ff3d3727.jpg"},13:function(e,n,t){e.exports=t(20)},18:function(e,n,t){},19:function(e,n,t){},20:function(e,n,t){"use strict";t.r(n);var a=t(1),o=t.n(a),i=t(7),r=t.n(i),s=(t(18),t(12)),c=t(2),u=t(8),l=t(3),h=t(4),d=t(0),m=t(9),v=(t(19),t(10)),f=t.n(v),p=t(11),w=function(e){return 3.2*e},g=(new d.o).load(f.a),k=function(e){Object(h.a)(t,e);var n=Object(l.a)(t);function t(e){var a;return Object(c.a)(this,t),(a=n.call(this,e)).townCanvas=void 0,a.animationToken=void 0,a.camera=void 0,a.controls=void 0,a.scene=void 0,a.renderer=void 0,a.townCanvas=o.a.createRef(),a.scene=new d.l,a}return Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,n=this.townCanvas.current,t=null===n||void 0===n?void 0:n.getContext("webgl2");if(n&&t){var a=n.getBoundingClientRect(),o=a.width/a.height;this.renderer=this.setUpRenderer(n,t,a).renderer;var i=this.setupCamera(o,20,this.scene,this.renderer);this.camera=i.camera,this.controls=i.controls,this.setupLighting(this.scene),this.scene.background=new d.b("#87CEEB"),this.scene.fog=new d.e(16777215,0,200),this.scene.scale.set(.5,.5,.5),this.setRegion({tiles:Object(s.a)(Array(256).keys()).map((function(e){return{coordinates:{x:e%16-8,y:Math.floor(e/16)-8}}}))}),this.animationToken=requestAnimationFrame((function(){return e.animate()}))}}},{key:"componentWillUnmount",value:function(){this.animationToken&&cancelAnimationFrame(this.animationToken)}},{key:"setRegion",value:function(e){var n=this;e.tiles.forEach((function(e,t){new d.i({color:"#eeeeee"});var a=new d.h({map:g}),o=new p.a(new d.a(3,.1,3),a);n.scene.add(o),o.translateX(w(e.coordinates.x)),o.translateZ(w(e.coordinates.y))}))}},{key:"animate",value:function(){var e=this;this.controls.update(),this.renderer.render(this.scene,this.camera),this.animationToken=requestAnimationFrame((function(){return e.animate()}))}},{key:"setupCamera",value:function(e,n,t,a){var o=new d.j(-n*e,n*e,n,-n,1,1e3),i=new m.a(o,a.domElement);return i.enableDamping=!0,i.dampingFactor=.005,i.screenSpacePanning=!1,i.minDistance=100,i.maxDistance=500,i.maxPolarAngle=Math.PI/2,i.autoRotate=!0,i.autoRotateSpeed=.5,o.position.set(50,50,50),o.lookAt(t.position),i.update(),{camera:o,controls:i}}},{key:"setUpRenderer",value:function(e,n,t){var a=new d.r({canvas:e,context:n});return a.setPixelRatio(2),a.setSize(t.width,t.height),{renderer:a}}},{key:"setupLighting",value:function(e){var n=new d.f(16777215,16777215,1);e.add(n);var t=new d.c(16777215,.5);t.position.multiplyScalar(500),t.position.setX(150),e.add(t)}},{key:"render",value:function(){return o.a.createElement("canvas",{ref:this.townCanvas,className:"TownCanvas"})}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[13,1,2]]]);
//# sourceMappingURL=main.a186bf1c.chunk.js.map