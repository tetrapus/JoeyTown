(this.webpackJsonpjoeytown=this.webpackJsonpjoeytown||[]).push([[0],{12:function(e,n,t){e.exports=t.p+"static/media/grass.ff3d3727.jpg"},16:function(e,n,t){e.exports=t(23)},21:function(e,n,t){},22:function(e,n,t){},23:function(e,n,t){"use strict";t.r(n);var a=t(1),o=t.n(a),i=t(7),r=t.n(i),s=(t(21),t(15)),c=t(2),l=t(8),d=t(3),u=t(4),h=t(0),m=t(9),v=t(10),p=t(11),w=(t(22),t(12)),f=t.n(w),g=t(14),y=t(13),k=function(e){return 3.2*e},b=(new h.nb).load(f.a),C=function(e){Object(u.a)(t,e);var n=Object(d.a)(t);function t(e){var a;return Object(c.a)(this,t),(a=n.call(this,e)).townCanvas=void 0,a.animationToken=void 0,a.camera=void 0,a.controls=void 0,a.scene=void 0,a.renderer=void 0,a.townCanvas=o.a.createRef(),a.scene=new h.fb,a}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,n=this.townCanvas.current,t=null===n||void 0===n?void 0:n.getContext("webgl2");if(n&&t){var a=n.getBoundingClientRect(),o=a.width/a.height;this.renderer=this.setUpRenderer(n,t,a).renderer,document.body.appendChild(v.a.createButton(this.renderer));var i=this.setupCamera(o,18,this.scene,this.renderer);this.camera=i.camera,this.controls=i.controls,this.setupLighting(this.scene),this.scene.background=new h.i("#87CEEB"),this.scene.fog=new h.n(16777215,0,200),this.scene.scale.set(.5,.5,.5),this.setRegion({tiles:Object(s.a)(Array(256).keys()).map((function(e){return{coordinates:{x:e%16-8,y:Math.floor(e/16)-8}}}))}),this.renderer.setAnimationLoop((function(){return e.animate()}))}}},{key:"componentWillUnmount",value:function(){this.animationToken&&cancelAnimationFrame(this.animationToken)}},{key:"setRegion",value:function(e){var n=this;e.tiles.forEach((function(e,t){new h.N({color:"#eeeeee"});var a=new h.M({map:b}),o=new g.a(new h.d(3,.1,3),a);n.scene.add(o),o.translateX(k(e.coordinates.x)),o.translateZ(k(e.coordinates.y))}));var t=new p.a,a=new y.a;a.setDecoderPath("/examples/js/libs/draco/"),t.setDRACOLoader(a),t.load("models/joeytown-sign.glb",(function(e){e.scene.scale.set(40,40,40),e.scene.translateY(-30),e.scene.translateX(-10),e.scene.translateZ(15.5),n.scene.add(e.scene),console.log("loaded!")}),(function(e){console.log(e.loaded/e.total*100+"% loaded")}),(function(e){console.log("An error happened")}))}},{key:"animate",value:function(){this.controls.update(),this.renderer.render(this.scene,this.camera)}},{key:"setupCamera",value:function(e,n,t,a){var o=new h.V(n,e,1,1e3),i=new m.a(o,a.domElement);return i.enableDamping=!0,i.dampingFactor=.005,i.screenSpacePanning=!1,i.minDistance=100,i.maxDistance=500,i.maxPolarAngle=Math.PI/2,i.autoRotate=!0,i.autoRotateSpeed=.5,o.position.set(50,50,-50),o.lookAt(t.position),i.update(),{camera:o,controls:i}}},{key:"setUpRenderer",value:function(e,n,t){var a=new h.tb({canvas:e,context:n});return a.setPixelRatio(2),a.setSize(t.width,t.height),a.xr.enabled=!0,{renderer:a}}},{key:"setupLighting",value:function(e){var n=new h.q(16777215,16777215,1);e.add(n);var t=new h.j(16777215,.2);t.position.multiplyScalar(500),t.position.setX(150),e.add(t)}},{key:"render",value:function(){return o.a.createElement("canvas",{ref:this.townCanvas,className:"TownCanvas"})}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.bbe63334.chunk.js.map